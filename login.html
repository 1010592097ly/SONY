<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ç™»é™†é¡µé¢</title><link rel="stylesheet" href="./css/login.min.css"></head><body><div class="login"><div class="user">ğŸ‘¤ï¼š<input type="text" id="name" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"></div><div class="password">å¯†ç ï¼š<input type="text" id="password" placeholder="è¯·è¾“å…¥å¯†ç "></div><div class="alert" id="alert"><span>12</span></div><div class="btn"><span><a href="./register.html">æ²¡æœ‰è´¦å·ï¼Œå»æ³¨å†Œâ©</a></span> <button id="btn">ç™»é™†</button></div></div><script type="module">import {$post, antiShake} from "./js/ajax.js";
        var aInputs = document.querySelectorAll(".login input");
        var aAlert = document.getElementById("alert");
        var oBtn = document.getElementById("btn");


        oBtn.onclick = antiShake(download,1000);
            function download(){
                $post({
                    url: "phps/login.php",
                    data: {
                        username: aInputs[0].value,
                        password: aInputs[1].value,
                    },
                    success: function(result){
                        console.log(result);
                        var obj = JSON.parse(result);
                        aAlert.style.display = 'block';
                        if(obj.code){
                            //é”™è¯¯
                            aAlert.innerHTML = obj.msg;
                            aAlert.style.color = "red";
                        }else{
                            //æˆåŠŸ
                            aAlert.innerHTML = obj.msg;
                            aAlert.style.color = "green";
                            setTimeout(() => {
                                location.assign("./index.html");
                            }, 500);
                        }
                    },
                    error: function(msg){
                        console.log(msg);
                    }
                })
            }</script></body></html>